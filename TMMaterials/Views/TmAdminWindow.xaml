<Window x:Class="TMMaterials.Views.TmAdminWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:TMMaterials.ViewModels"
        Title="TM Administration - XML Processor" Height="350" Width="550"
        Background="#F4F7F9" WindowStartupLocation="CenterScreen" ResizeMode="NoResize">

    <Window.DataContext>
        <vm:TMAdminVM />
    </Window.DataContext>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="XML Data Import" FontSize="22" FontWeight="Bold" Foreground="#2C3E50"/>
            <TextBlock Text="Upload and process structural XML definitions to the master database." 
                       Foreground="#7F8C8D" FontSize="12"/>
        </StackPanel>

        <GroupBox Header="XML Source File" Grid.Row="1" Padding="10" Margin="0,0,0,15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBox x:Name="FilePathTextBox" 
                         IsReadOnly="True" 
                         Height="28" 
                         VerticalContentAlignment="Center" 
                         Margin="0,0,10,0" 
                         Text="{Binding FilePath, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>

                <Button Grid.Column="1" Content="Browse..." 
                        Command="{Binding BrowseCommand}" 
                        Width="80" Height="28" Background="#E0E0E0"/>
            </Grid>
        </GroupBox>

        <StackPanel Grid.Row="2" Margin="0,5">
            <DockPanel LastChildFill="True">
                <TextBlock Text="Processing Status:" FontWeight="SemiBold" DockPanel.Dock="Left"/>

                <TextBlock x:Name="PercentageLabel" 
                           Text="{Binding ProgressValue, StringFormat={}{0}%}" 
                           HorizontalAlignment="Right" DockPanel.Dock="Right"/>
            </DockPanel>

            <ProgressBar x:Name="UploadProgressBar" Height="15" Margin="0,8,0,0" 
                         Minimum="0" Maximum="100" 
                         Value="{Binding ProgressValue}" 
                         Foreground="#27AE60"/>
        </StackPanel>

        <Border Grid.Row="3" Background="#FFFFFF" BorderBrush="#DCDCDC" BorderThickness="1" Margin="0,15,0,15" CornerRadius="3">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <TextBlock x:Name="LogOutput" 
                           Padding="5" FontSize="11" 
                           Foreground="#34495E" 
                           Text="{Binding LogOutput}" 
                           TextWrapping="Wrap"/>
            </ScrollViewer>
        </Border>

        <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="Clear Form" 
            Command="{Binding ClearCommand}"
            Width="100" Height="32" 
            Background="#E67E22" Foreground="White" 
            FontWeight="Bold" Margin="0,0,10,0"/>

            <Button Content="Process &amp; Save" 
            Command="{Binding ProcessCommand}"
            Width="120" Height="32" 
            Background="#27AE60" Foreground="White" 
            FontWeight="Bold" Margin="0,0,10,0"/>

            <Button Content="Close" Width="80" Height="32" 
            IsCancel="True" Click="CloseButton_Click"/>
        </StackPanel>
    </Grid>
</Window>